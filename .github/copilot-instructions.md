<!-- Autogenerated guidance for AI coding agents working on this repo. -->
# Copilot Instructions for yalla_nemshi

Purpose: provide concise, repo-specific rules so an AI coding assistant can be immediately productive.

- **Big picture:** Flutter mobile/web app that uses Firebase (auth, firestore), native plugins (maps, notifications), and a small service layer in `lib/services/`.

- **Key components & flow:**
  - App entry: `lib/main.dart` — initializes Firebase differently for web vs native and calls `NotificationService.instance.init()` before `runApp()`.
  - UI: `lib/screens/*` contain `LoginScreen`, `SignupScreen`, `HomeScreen` and route names are registered in `main.dart`.
  - Services: `lib/services/` holds platform integrations (e.g., `notification_service.dart`). Look here for side-effects and platform APIs.
  - Theme: `theme_controller.dart` exposes a `ThemeController.instance.themeMode` ValueListenable that the app uses.

- **Files to inspect first:**
  - [pubspec.yaml](pubspec.yaml#L1) — SDK constraint and core dependencies (firebase_core, firebase_auth, cloud_firestore, google_maps_flutter, etc.).
  - [lib/main.dart](lib/main.dart#L1) — Firebase init differences (web vs native), routes, notification init.
  - `lib/services/notification_service.dart` — how notifications are scheduled/initialized.
  - `android/app/google-services.json` and `ios/Runner` — native Firebase config locations.

- **Build / run / debug** (project-specific):
  - Install deps: `flutter pub get` (use Flutter matching `sdk` in `pubspec.yaml`).
  - Run on Android emulator or device: `flutter run -d android`.
  - Run on Windows: `flutter run -d windows` (desktop support present in workspace).
  - Web: the Firebase options are hard-coded in `main.dart` for web builds; ensure web builds use those values.
  - Android native config relies on `android/app/google-services.json` and iOS on `ios/Runner` project settings.

- **Project-specific conventions & patterns:**
  - Routes are registered centrally in `main.dart` using static `routeName` strings from screen classes.
  - Singletons used for platform services (e.g., `NotificationService.instance`). Prefer following that pattern when adding platform integrations.
  - Theme switching is via a `ValueListenable<ThemeMode>` exposed from `ThemeController.instance` — use this controller rather than global theme variables.
  - Firebase is initialized conditionally: check `kIsWeb` in `main.dart` before changing init behavior.

- **Integration & external deps to be careful with:**
  - Firebase SDKs: changing initialization code may break web vs native flows — mirror existing if you add a new Firebase product.
  - Native plugins (maps, image picker, permissions): changes often require updating Android/iOS manifests and gradle files under `android/` and native runners under `ios/`.
  - `google-services.json` is present at `android/app/google-services.json` — don't remove or overwrite without checking Android config.

- **What to change vs what to avoid:**
  - Safe to modify UI screens, DI of services, and Dart-only logic in `lib/`.
  - When adding native permissions or manifest entries, update `android/` and `ios/` accordingly and mention platform steps in the PR.
  - Avoid changing Firebase init patterns in `main.dart` unless you update both web and native paths and test on both.

- **Quick grep examples (use these to find patterns):**
  - Services: `lib/services/` → `grep -R "class .*Service" lib/services`
  - Routes: search `routeName` in `lib/screens` to find route definitions.

- **When to ask a human / raise uncertainty:**
  - If native gradle or plist changes are required, ask for a manual device test on Android/iOS.
  - If a change touches Firebase credentials or production project IDs, stop and request owner confirmation.

If anything above is unclear or you want the agent to follow stricter rules (commits, test runs, PR templates), tell me what to add and I will iterate.
